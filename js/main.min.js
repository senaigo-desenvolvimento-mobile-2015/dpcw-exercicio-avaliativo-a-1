function Pessoa(){}function PessoaFisica(){}function PessoaJuridica(){}function Telefone(){}function LocalStorageFactory(){}"undefined"==typeof Storage&&alert("Atenção!\n\nNão há suporte para o armazenamento em seu navegador atual.\nO que for feito, não será persistido.");var id=document.getElementById("identificador"),nome=document.getElementById("nome"),endereco=document.getElementById("endereco"),telefone=document.getElementById("telefone"),cpf=document.getElementById("cpf"),cnpj=document.getElementById("cnpj"),inscricaoEstadual=document.getElementById("inscricaoEstadual"),pessoafisica=document.getElementById("pessoafisica"),pessoajuridica=document.getElementById("pessoajuridica"),divCnpj=document.getElementById("cnpjdiv"),divInscEstadual=document.getElementById("iediv"),divCpf=document.getElementById("cpfdiv"),listagem=document.getElementById("tblistagem"),tbFoot=document.getElementById("tbfoot"),tableList=document.getElementById("tableList"),regCount=document.getElementById("regCount"),id,nome,endereco,telefone;Pessoa.prototype.setId=function(a){this.id=a},Pessoa.prototype.getId=function(){return this.id},Pessoa.prototype.setNome=function(a){this.nome=a},Pessoa.prototype.getNome=function(){return this.nome},Pessoa.prototype.setEndereco=function(a){this.endereco=a},Pessoa.prototype.getEndereco=function(){return this.endereco},Pessoa.prototype.setTelefone=function(a){this.telefone=a},Pessoa.prototype.getTelefone=function(){return this.telefone};var cpf;PessoaFisica.prototype=new Pessoa,PessoaFisica.prototype.setCpf=function(a){this.cpf=a},PessoaFisica.prototype.getCpf=function(){return this.cpf};var inscricaoEstadual,cnpj;PessoaJuridica.prototype=new Pessoa,PessoaJuridica.prototype.setInscricaoEstadual=function(a){this.inscricaoEstadual=a},PessoaJuridica.prototype.getInscricaoEstadual=function(){return this.inscricaoEstadual},PessoaJuridica.prototype.setCnpj=function(a){this.cnpj=a},PessoaJuridica.prototype.getCnpj=function(){return this.cnpj};var numero;Telefone.prototype.setNumero=function(a){this.numero=a},Telefone.prototype.getNumero=function(){return this.numero},LocalStorageFactory.prototype.salvar=function(a){return localStorage.setItem(a.getId(),JSON.stringify(a)),!0},LocalStorageFactory.prototype.excluir=function(a){return localStorage.removeItem(a),!0},LocalStorageFactory.prototype.consultarPorId=function(a){var b=localStorage.getItem(a);return JSON.parse(b)},LocalStorageFactory.prototype.listarTodos=function(){for(var a={},b=Object.keys(localStorage),c=b.length;c--;)a[c]=localStorage.getItem(b[c]);return a};var runTime=null,checkPessoaFisica=function(a){divCnpj.classList.add("hidden"),divInscEstadual.classList.add("hidden"),divCpf.classList.remove("hidden"),pessoafisica.checked=!0,"undefined"==typeof a&&inputClear()},checkPessoaJuridica=function(a){divCnpj.classList.remove("hidden"),divInscEstadual.classList.remove("hidden"),divCpf.classList.add("hidden"),pessoajuridica.checked=!0,"undefined"==typeof a&&inputClear()},inputClear=function(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++)"text"==a[b].type&&(a[b].value="");id.focus()},validar=function(){for(var a=document.getElementsByTagName("input"),b={},c=0;c<a.length;c++)a[c].hasAttribute("required")&&""===a[c].value&&(b[c]=a[c].getAttribute("name"));if(Object.keys(b).length<=0)return!0;var d="O(s) campo(s) listado(s) abaixo n&atilde;o pode(m) ser vazio(s):<br>";for(var e in b)d+="<p>-&nbsp;"+b[e]+"</p>";return output("error",d),!1},output=function(a,b,c){removeDomElemment("output"),clearTimeout(defineTime);var d=document.createElement("div");d.id="output",d.className="alert "+a;var e=document.createElement("div");e.className="msg",e.innerHTML=b,d.appendChild(e),document.body.appendChild(d),defineTime(),"function"==typeof c&&c()},removeDomElemment=function(a,b){document.contains(document.getElementById(a))&&document.getElementById(a).remove(),"function"==typeof b&&b()},defineTime=function(){return setTimeout(function(){removeDomElemment("output")},1e4)},addrow=function(a,b){removeDomElemment("message-empty"),tr=listagem.insertRow(listagem.rows.length),td=tr.insertCell(tr.cells.length),tr.id=a.id,td.innerHTML=a.id,td=tr.insertCell(tr.cells.length),td.innerHTML=a.nome,td=tr.insertCell(tr.cells.length),td.innerHTML=a.endereco,td=tr.insertCell(tr.cells.length),td.innerHTML=a.telefone,td=tr.insertCell(tr.cells.length),"undefined"!=typeof a.cpf?td.innerHTML="CPF: "+a.cpf:td.innerHTML="CNPJ: "+a.cnpj+" IE.:"+a.inscricaoEstadual,td.setAttribute("align","center"),td=tr.insertCell(tr.cells.length),td.innerHTML='<button type="button" class="bt-editar" name="button" title="Editar" alt="Editar" onclick="editar(`'+a.id+'`);">&#x261D;</button> <button type="button" name="button" title="Excluir" alt="Excluir" class="bt-excluir" onclick="excluir(`'+a.id+'`);">&#x2672;</button>',"function"==typeof b&&b()},preencherCamposParaEdicao=function(a){id.value=a.id,nome.value=a.nome,endereco.value=a.endereco,telefone.value=a.telefone,"undefined"!=typeof a.cpf?(cpf.value=a.cpf,checkPessoaFisica(!1)):(cnpj.value=a.cnpj,inscricaoEstadual.value=a.inscricaoEstadual,checkPessoaJuridica(!1))},incrementaContador=function(){var a=++contador;tbFoot.innerHTML="Total de <b>"+a+"</b> registro(s)"},decrementaContador=function(){var a=--contador;tbFoot.innerHTML="Total de <b>"+a+"</b> registro(s)"},contador=0,salvar=function(){if(validar()){var a=new LocalStorageFactory,b={};pessoafisica.checked?(b=new PessoaFisica,b.setCpf(cpf.value)):(b=new PessoaJuridica,b.setCnpj(cnpj.value),b.setInscricaoEstadual(inscricaoEstadual.value)),b.setId(id.value),b.setNome(nome.value),b.setEndereco(endereco.value);var c=new Telefone;c.setNumero(telefone.value),b.setTelefone(c.getNumero()),a.salvar(b)?output("success","Cadastrado com sucesso!",function(){addrow(b,incrementaContador())}):output("info","Erro ao realizar cadastro.")}},excluir=function(a){var b=new LocalStorageFactory;b.excluir(a)?output("success","Registro removido com sucesso!",function(){removeDomElemment(a,decrementaContador())}):output("info","Erro ao realizar cadastro.")},editar=function(a){var b=new LocalStorageFactory;preencherCamposParaEdicao(b.consultarPorId(a))},listarItens=function(){var a,b,c,d,e=new LocalStorageFactory,f=e.listarTodos();if(Object.keys(f).length>0){for(a in f)b=JSON.parse(f[a]),c=listagem.insertRow(listagem.rows.length),d=c.insertCell(c.cells.length),c.id=b.id,d.innerHTML=b.id,d=c.insertCell(c.cells.length),d.innerHTML=b.nome,d=c.insertCell(c.cells.length),d.innerHTML=b.endereco,d=c.insertCell(c.cells.length),d.innerHTML=b.telefone,d=c.insertCell(c.cells.length),"undefined"!=typeof b.cpf?d.innerHTML="CPF: "+b.cpf:d.innerHTML="CNPJ: "+b.cnpj+" IE.:"+b.inscricaoEstadual,d.setAttribute("align","center"),d=c.insertCell(c.cells.length),d.innerHTML='<button type="button" class="bt-editar" name="button" title="Editar" alt="Editar" onclick="editar(`'+b.id+'`);">&#x261D;</button> <button type="button" name="button" title="Excluir" alt="Excluir" class="bt-excluir" onclick="excluir(`'+b.id+'`);">&#x2672;</button>',incrementaContador();tbFoot.innerHTML="Total de <b>"+contador+"<b> registro(s)"}else 0>=contador&&(listagem.innerHTML='<tr><td colspan="6" id="message-empty">N&atilde;o h&aacute; dados cadastrados em seu navegador at&eacute; o momento</td></tr>')};