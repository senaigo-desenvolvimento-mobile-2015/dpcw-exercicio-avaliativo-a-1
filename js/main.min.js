"undefined"==typeof Storage&&alert("Atenção!\n\nNão há suporte para o armazenamento em seu navegador atual.\nO que for feito, não será persistido.");var Componente={id:document.getElementById("identificador"),nome:document.getElementById("nome"),endereco:document.getElementById("endereco"),telefone:document.getElementById("telefone"),cpf:document.getElementById("cpf"),cnpj:document.getElementById("cnpj"),inscricaoEstadual:document.getElementById("inscricaoEstadual"),pessoafisica:document.getElementById("pessoafisica"),pessoajuridica:document.getElementById("pessoajuridica"),divCnpj:document.getElementById("cnpjdiv"),divInscEstadual:document.getElementById("iediv"),divCpf:document.getElementById("cpfdiv"),listagem:document.getElementById("tblistagem"),tbFoot:document.getElementById("tbfoot"),tableList:document.getElementById("tableList"),regCount:document.getElementById("regCount"),box:document.getElementById("box"),form:document.getElementById("form"),x:0,y:20},Obj={Controlador:{},Functions:{},Pessoa:function(){},PessoaFisica:function(){},PessoaJuridica:function(){},Telefone:function(){},LocalStorageFactory:function(){}};!function(){"use strict";Obj.Pessoa.prototype=function(a,b,c,d){this.id=a,this.nome=b,this.endereco=c,this.telefone=d},Obj.Pessoa.prototype.setId=function(a){this.id=a},Obj.Pessoa.prototype.getId=function(){return this.id},Obj.Pessoa.prototype.setNome=function(a){this.nome=a},Obj.Pessoa.prototype.getNome=function(){return this.nome},Obj.Pessoa.prototype.setEndereco=function(a){this.endereco=a},Obj.Pessoa.prototype.getEndereco=function(){return this.endereco},Obj.Pessoa.prototype.setTelefone=function(a){this.telefone=a},Obj.Pessoa.prototype.getTelefone=function(){return this.telefone}}(),function(){"use strict";Obj.PessoaFisica.prototype=new Obj.Pessoa,Obj.PessoaFisica.prototype.setCpf=function(a){this.cpf=a},Obj.PessoaFisica.prototype.getCpf=function(){return this.cpf}}(),function(){"use strict";Obj.PessoaJuridica.prototype=new Obj.Pessoa,Obj.PessoaJuridica.prototype.setInscricaoEstadual=function(a){this.inscricaoEstadual=a},Obj.PessoaJuridica.prototype.getInscricaoEstadual=function(){return this.inscricaoEstadual},Obj.PessoaJuridica.prototype.setCnpj=function(a){this.cnpj=a},Obj.PessoaJuridica.prototype.getCnpj=function(){return this.cnpj}}(),function(){"use strict";Obj.Telefone.prototype=function(a){this.numero=a},Obj.Telefone.prototype.setNumero=function(a){this.numero=a},Obj.Telefone.prototype.getNumero=function(){return this.numero}}(),function(){"use strict";Obj.LocalStorageFactory.prototype=function(){},Obj.LocalStorageFactory.prototype.salvar=function(a){return localStorage.setItem(a.getId(),JSON.stringify(a)),!0},Obj.LocalStorageFactory.prototype.excluir=function(a){return localStorage.removeItem(a),!0},Obj.LocalStorageFactory.prototype.consultarPorId=function(a){var b=localStorage.getItem(a);return JSON.parse(b)},Obj.LocalStorageFactory.prototype.listarTodos=function(){for(var a={},b=Object.keys(localStorage),c=b.length;c--;)a[c]=localStorage.getItem(b[c]);return a}}(),function(){"use strict";Obj.Functions={checkPessoaFisica:function(a){Componente.divCnpj.classList.add("hidden"),Componente.divInscEstadual.classList.add("hidden"),Componente.divCpf.classList.remove("hidden"),Componente.pessoafisica.checked=!0,"undefined"==typeof a&&this.limparCampos()},checkPessoaJuridica:function(a){Componente.divCnpj.classList.remove("hidden"),Componente.divInscEstadual.classList.remove("hidden"),Componente.divCpf.classList.add("hidden"),Componente.pessoajuridica.checked=!0,"undefined"==typeof a&&this.limparCampos()},limparCampos:function(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++)"text"==a[b].type&&(a[b].value="");this.modoEdicao(!1),Componente.id.focus()},validar:function(){for(var a=document.getElementsByTagName("input"),b={},c=0;c<a.length;c++)a[c].hasAttribute("required")&&""===a[c].value&&(b[c]=a[c].getAttribute("name"));if(Object.keys(b).length<=0)return!0;var d="O(s) campo(s) listado(s) abaixo n&atilde;o pode(m) ser vazio(s):<br>";for(var e in b)d+="<p>-&nbsp;"+b[e]+"</p>";return this.calert("error",d),!1},calert:function(a,b,c){this.removeDomElemment("output"),clearTimeout(this.defineTime);var d=document.createElement("div");d.id="output",d.className="alert "+a;var e=document.createElement("div");e.className="msg",e.innerHTML=b,d.appendChild(e),document.body.appendChild(d),this.defineTime(),"function"==typeof c&&c()},defineTime:function(){return setTimeout(function(){Obj.Functions.removeDomElemment("output")},1e4)},removeDomElemment:function(a,b){document.contains(document.getElementById(a))&&document.getElementById(a).remove(),"function"==typeof b&&b()},addrow:function(a,b){var c,d;this.removeDomElemment("message-empty"),c=Componente.listagem.insertRow(Componente.listagem.rows.length),d=c.insertCell(c.cells.length),c.id=a.id,d.innerHTML=a.id,d=c.insertCell(c.cells.length),d.innerHTML=a.nome,d=c.insertCell(c.cells.length),d.innerHTML=a.endereco,d=c.insertCell(c.cells.length),d.innerHTML=a.telefone,d=c.insertCell(c.cells.length),"undefined"!=typeof a.cpf?d.innerHTML="CPF: "+a.cpf:d.innerHTML="CNPJ: "+a.cnpj+" IE.:"+a.inscricaoEstadual,d.setAttribute("align","center"),d=c.insertCell(c.cells.length),d.innerHTML='<button type="button" class="bt-editar" name="button" title="Editar" alt="Editar" onclick="Obj.Controlador.editar(\''+a.id+'\');">&#x261D;</button> <button type="button" name="button" title="Excluir" alt="Excluir" class="bt-excluir" onclick="Obj.Controlador.excluir(\''+a.id+"');\">&#x2672;</button>","function"==typeof b&&b()},preencherCamposParaEdicao:function(a){this.modoEdicao(!0),Componente.id.value=a.id,Componente.nome.value=a.nome,Componente.endereco.value=a.endereco,Componente.telefone.value=a.telefone,"undefined"!=typeof a.cpf?(Componente.cpf.value=a.cpf,this.checkPessoaFisica(!1)):(Componente.cnpj.value=a.cnpj,Componente.inscricaoEstadual.value=a.inscricaoEstadual,this.checkPessoaJuridica(!1))},modoEdicao:function(a){a?Componente.id.setAttribute("readonly","true"):Componente.id.removeAttribute("readonly")},contarRegistros:function(){var a=document.querySelectorAll("tbody tr[id]").length;return 0>=a&&(Componente.listagem.innerHTML='<tr><td colspan="6" id="message-empty">N&atilde;o h&aacute; dados cadastrados em seu navegador at&eacute; o momento</td></tr>'),Componente.tbFoot.innerHTML="Total de <b>"+a+"</b> registro(s)",a},timers:{timerID:0,timers:[],add:function(a){this.timers.push(a)},start:function(){this.timerID||!function a(){if(Obj.Functions.timers.timers.length>0){for(var b=0;b<Obj.Functions.timers.timers.length;b++)Obj.Functions.timers.timers[b]()===!1&&(Obj.Functions.timers.timers.splice(b,1),b--);Obj.Functions.timers.timerID=setTimeout(a,100)}}()},stop:function(){clearTimeout(this.timerID),this.timerID=0}}}}(),function(){"use strict";Obj.Controlador={salvar:function(){if(Obj.Functions.validar()){var a=new Obj.LocalStorageFactory,b={};Componente.pessoafisica.checked?(b=new Obj.PessoaFisica,b.setCpf(Componente.cpf.value)):(b=new Obj.PessoaJuridica,b.setCnpj(Componente.cnpj.value),b.setInscricaoEstadual(Componente.inscricaoEstadual.value)),b.setId(Componente.id.value),b.setNome(Componente.nome.value),b.setEndereco(Componente.endereco.value);var c=new Obj.Telefone;c.setNumero(Componente.telefone.value),b.setTelefone(c.getNumero()),a.salvar(b)?(Obj.Functions.calert("success","Cadastrado com sucesso!",function(){Obj.Functions.removeDomElemment(b.getId()),Obj.Functions.addrow(b),Obj.Functions.contarRegistros()}),this.novoRegistro()):Obj.Functions.calert("info","Erro ao realizar cadastro.")}},excluir:function(a){var b=new Obj.LocalStorageFactory;b.excluir(a)?Obj.Functions.calert("success","Registro removido com sucesso!",function(){Obj.Functions.removeDomElemment(a),Obj.Functions.limparCampos(),Obj.Functions.contarRegistros()}):Obj.Functions.calert("info","Erro ao realizar cadastro.")},editar:function(a){var b=new Obj.LocalStorageFactory;Obj.Functions.preencherCamposParaEdicao(b.consultarPorId(a)),Componente.form.scrollTop=-100,Componente.nome.focus()},novoRegistro:function(){Obj.Functions.limparCampos()},listarItens:function(){var a,b=new Obj.LocalStorageFactory,c=b.listarTodos();if(Object.keys(c).length>0)for(a in c)Obj.Functions.addrow(JSON.parse(c[a]));Obj.Functions.contarRegistros()}}}(),Componente.id.focus(),Obj.Functions.timers.add(function(){return Componente.box.style.left=Componente.x+"px",++Componente.x>50?!1:void 0}),Obj.Functions.timers.add(function(){return Componente.box.style.top=Componente.y+"px",Componente.y+=2,Componente.y>120?!1:void 0}),Obj.Functions.timers.start(),Obj.Functions.limparCampos();