function Pessoa(){}function PessoaFisica(){}function PessoaJuridica(){}function Telefone(){}function LocalStorageFactory(){}"undefined"==typeof Storage&&alert("Atenção!\n\nNão há suporte para o armazenamento em seu navegador atual.\nO que for feito, não será persistido.");var id=document.getElementById("identificador"),nome=document.getElementById("nome"),endereco=document.getElementById("endereco"),telefone=document.getElementById("telefone"),cpf=document.getElementById("cpf"),cnpj=document.getElementById("cnpj"),inscricaoEstadual=document.getElementById("inscricaoEstadual"),pessoafisica=document.getElementById("pessoafisica"),pessoajuridica=document.getElementById("pessoajuridica"),divCnpj=document.getElementById("cnpjdiv"),divInscEstadual=document.getElementById("iediv"),divCpf=document.getElementById("cpfdiv"),listagem=document.getElementById("tblistagem"),tbFoot=document.getElementById("tbfoot"),tableList=document.getElementById("tableList"),regCount=document.getElementById("regCount"),box=document.getElementById("box"),form=document.getElementById("form"),x=0,y=20,tr,td,Controlador={},Functions={};!function(){"use strict";Pessoa.prototype.setId=function(a){this.id=a},Pessoa.prototype.getId=function(){return this.id},Pessoa.prototype.setNome=function(a){this.nome=a},Pessoa.prototype.getNome=function(){return this.nome},Pessoa.prototype.setEndereco=function(a){this.endereco=a},Pessoa.prototype.getEndereco=function(){return this.endereco},Pessoa.prototype.setTelefone=function(a){this.telefone=a},Pessoa.prototype.getTelefone=function(){return this.telefone}}(Pessoa),function(){"use strict";PessoaFisica.prototype=new Pessoa,PessoaFisica.prototype.setCpf=function(a){this.cpf=a},PessoaFisica.prototype.getCpf=function(){return this.cpf}}(PessoaFisica),function(){"use strict";PessoaJuridica.prototype=new Pessoa,PessoaJuridica.prototype.setInscricaoEstadual=function(a){this.inscricaoEstadual=a},PessoaJuridica.prototype.getInscricaoEstadual=function(){return this.inscricaoEstadual},PessoaJuridica.prototype.setCnpj=function(a){this.cnpj=a},PessoaJuridica.prototype.getCnpj=function(){return this.cnpj}}(PessoaJuridica),function(){"use strict";Telefone.prototype.setNumero=function(a){this.numero=a},Telefone.prototype.getNumero=function(){return this.numero}}(Telefone),function(){"use strict";LocalStorageFactory.prototype.salvar=function(a){return localStorage.setItem(a.getId(),JSON.stringify(a)),!0},LocalStorageFactory.prototype.excluir=function(a){return localStorage.removeItem(a),!0},LocalStorageFactory.prototype.consultarPorId=function(a){var b=localStorage.getItem(a);return JSON.parse(b)},LocalStorageFactory.prototype.listarTodos=function(){for(var a={},b=Object.keys(localStorage),c=b.length;c--;)a[c]=localStorage.getItem(b[c]);return a}}(LocalStorageFactory),function(){"use strict";Functions={checkPessoaFisica:function(a){divCnpj.classList.add("hidden"),divInscEstadual.classList.add("hidden"),divCpf.classList.remove("hidden"),pessoafisica.checked=!0,"undefined"==typeof a&&this.limparCampos()},checkPessoaJuridica:function(a){divCnpj.classList.remove("hidden"),divInscEstadual.classList.remove("hidden"),divCpf.classList.add("hidden"),pessoajuridica.checked=!0,"undefined"==typeof a&&this.limparCampos()},limparCampos:function(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++)"text"==a[b].type&&(a[b].value="");this.modoEdicao(!1),id.focus()},validar:function(){for(var a=document.getElementsByTagName("input"),b={},c=0;c<a.length;c++)a[c].hasAttribute("required")&&""===a[c].value&&(b[c]=a[c].getAttribute("name"));if(Object.keys(b).length<=0)return!0;var d="O(s) campo(s) listado(s) abaixo n&atilde;o pode(m) ser vazio(s):<br>";for(var e in b)d+="<p>-&nbsp;"+b[e]+"</p>";return this.calert("error",d),!1},calert:function(a,b,c){this.removeDomElemment("output"),clearTimeout(this.defineTime);var d=document.createElement("div");d.id="output",d.className="alert "+a;var e=document.createElement("div");e.className="msg",e.innerHTML=b,d.appendChild(e),document.body.appendChild(d),this.defineTime(),"function"==typeof c&&c()},defineTime:function(){return setTimeout(function(){Functions.removeDomElemment("output")},1e4)},removeDomElemment:function(a,b){document.contains(document.getElementById(a))&&document.getElementById(a).remove(),"function"==typeof b&&b()},addrow:function(a,b){this.removeDomElemment("message-empty"),tr=listagem.insertRow(listagem.rows.length),td=tr.insertCell(tr.cells.length),tr.id=a.id,td.innerHTML=a.id,td=tr.insertCell(tr.cells.length),td.innerHTML=a.nome,td=tr.insertCell(tr.cells.length),td.innerHTML=a.endereco,td=tr.insertCell(tr.cells.length),td.innerHTML=a.telefone,td=tr.insertCell(tr.cells.length),"undefined"!=typeof a.cpf?td.innerHTML="CPF: "+a.cpf:td.innerHTML="CNPJ: "+a.cnpj+" IE.:"+a.inscricaoEstadual,td.setAttribute("align","center"),td=tr.insertCell(tr.cells.length),td.innerHTML='<button type="button" class="bt-editar" name="button" title="Editar" alt="Editar" onclick="Controlador.editar(\''+a.id+'\');">&#x261D;</button> <button type="button" name="button" title="Excluir" alt="Excluir" class="bt-excluir" onclick="Controlador.excluir(\''+a.id+"');\">&#x2672;</button>","function"==typeof b&&b()},preencherCamposParaEdicao:function(a){this.modoEdicao(!0),id.value=a.id,nome.value=a.nome,endereco.value=a.endereco,telefone.value=a.telefone,"undefined"!=typeof a.cpf?(cpf.value=a.cpf,this.checkPessoaFisica(!1)):(cnpj.value=a.cnpj,inscricaoEstadual.value=a.inscricaoEstadual,this.checkPessoaJuridica(!1))},modoEdicao:function(a){a?id.setAttribute("readonly","true"):id.removeAttribute("readonly")},contarRegistros:function(){var a=document.querySelectorAll("tbody tr[id]").length;return 0>=a&&(listagem.innerHTML='<tr><td colspan="6" id="message-empty">N&atilde;o h&aacute; dados cadastrados em seu navegador at&eacute; o momento</td></tr>'),tbFoot.innerHTML="Total de <b>"+a+"</b> registro(s)",a},timers:{timerID:0,timers:[],add:function(a){this.timers.push(a)},start:function(){this.timerID||!function a(){if(Functions.timers.timers.length>0){for(var b=0;b<Functions.timers.timers.length;b++)Functions.timers.timers[b]()===!1&&(Functions.timers.timers.splice(b,1),b--);Functions.timers.timerID=setTimeout(a,100)}}()},stop:function(){clearTimeout(this.timerID),this.timerID=0}}}}(Functions),function(){"use strict";Controlador={salvar:function(){if(Functions.validar()){var a=new LocalStorageFactory,b={};pessoafisica.checked?(b=new PessoaFisica,b.setCpf(cpf.value)):(b=new PessoaJuridica,b.setCnpj(cnpj.value),b.setInscricaoEstadual(inscricaoEstadual.value)),b.setId(id.value),b.setNome(nome.value),b.setEndereco(endereco.value);var c=new Telefone;c.setNumero(telefone.value),b.setTelefone(c.getNumero()),a.salvar(b)?Functions.calert("success","Cadastrado com sucesso!",function(){Functions.removeDomElemment(b.getId()),Functions.addrow(b),Controlador.novoRegistro(),Functions.contarRegistros()}):Functions.calert("info","Erro ao realizar cadastro.")}},excluir:function(a){var b=new LocalStorageFactory;b.excluir(a)?Functions.calert("success","Registro removido com sucesso!",function(){Functions.removeDomElemment(a),Functions.limparCampos(),Functions.contarRegistros()}):Functions.calert("info","Erro ao realizar cadastro.")},editar:function(a){var b=new LocalStorageFactory;Functions.preencherCamposParaEdicao(b.consultarPorId(a)),form.scrollTop=-100,nome.focus()},novoRegistro:function(){Functions.limparCampos()},listarItens:function(){var a,b=new LocalStorageFactory,c=b.listarTodos();if(Object.keys(c).length>0)for(a in c)Functions.addrow(JSON.parse(c[a]));Functions.contarRegistros()}}}(Controlador),Functions.timers.add(function(){return box.style.left=x+"px",++x>50?!1:void 0}),Functions.timers.add(function(){return box.style.top=y+"px",y+=2,y>120?!1:void 0}),Functions.timers.start(),id.focus(),Functions.limparCampos();